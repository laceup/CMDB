- args:
    cascade: false
    sql: |-
      DROP MATERIALIZED VIEW public.clinvar_mat CASCADE;
      CREATE MATERIALIZED VIEW public.clinvar_mat AS
       SELECT DISTINCT clinvar.gene_symbol,
          clinvar.type,
          clinvar.rs_dbsnp,
          clinvar.phenotypelist,
          clinvar.phenotypeids,
          clinvar.clinical_significance,
          trim("substring"("substring"(clinvar.name, '.*[c][.](.+).*'::text), '.*\((.+)\).*'::text)) AS hgvsp,
          trim(split_part("substring"(clinvar.name, '.*([c][.].+).*'::text), '('::text, 1)) AS hgvsc
         FROM public.clinvar
      WITH DATA;
      CREATE VIEW public.clinvar_derived AS
       SELECT clinvar_mat.gene_symbol,
          clinvar_mat.type,
          clinvar_mat.rs_dbsnp,
          clinvar_mat.phenotypelist,
          clinvar_mat.phenotypeids,
          clinvar_mat.clinical_significance,
          clinvar_mat.hgvsp,
          clinvar_mat.hgvsc
         FROM public.clinvar_mat;
  type: run_sql
- args:
    name: clinvar_derived
    schema: public
  type: add_existing_table_or_view
